<template>
  <div class="section-container">
    <h2 class="text-h5 q-mb-md">–ü—Ä–æ–µ–∫—Ç—ã</h2>
    <div class="row no-wrap q-gutter-md scroll">
      <q-card v-for="project in projects" :key="project.id" dark class="project-card">
        <q-card-section>
          <div class="text-h6">{{ project.name }}</div>
          <div class="text-caption q-mb-sm">{{ project.description }}</div>

          <div class="text-caption q-mb-sm">
            <q-chip v-for="status in project.status" :key="status" size="sm" color="primary" text-color="white"
              >{{ status }} {{ getStatusEmoji(status) }}</q-chip
            >
          </div>

          <div v-if="project.team.length > 0" class="q-mb-sm">
            <div class="text-caption text-grey q-mb-xs">–ö–æ–º–∞–Ω–¥–∞:</div>
            <div v-for="member in project.team" :key="member.name" class="row items-start q-gutter-x-sm q-mb-sm">
              <q-avatar size="32px">
                <img :src="member.avatar" />
              </q-avatar>
              <div class="column">
                <div class="text-caption">
                  {{ member.name }}
                  <a class="text-primary" :href="'https://t.me/' + member.telegram.slice(1)">{{ member.telegram }}</a>
                </div>
                <div class="row items-center q-gutter-x-sm">
                  <q-chip v-for="role in member.role" :key="role" dense size="sm" color="grey-9" text-color="grey"
                    >{{ role }} {{ getRoleEmoji(role) }}</q-chip
                  >
                </div>
              </div>
            </div>
          </div>

          <div v-if="project.openRoles.length > 0">
            <div class="text-caption text-grey q-mb-xs">–ò—â–µ–º:</div>
            <div class="row items-center q-gutter-x-sm">
              <q-chip
                v-for="role in project.openRoles"
                :key="role.title"
                dense
                size="sm"
                color="grey-9"
                text-color="grey"
                >{{ role.title }} {{ getRoleEmoji(role.title) }}</q-chip
              >
            </div>
          </div>
        </q-card-section>
      </q-card>
    </div>
    <!-- <q-btn flat color="grey" class="q-mt-sm" label="–≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã" /> -->
  </div>
</template>

<script setup>
// Helper function for avatars
const getAvatarUrl = (id) => {
  return `https://api.dicebear.com/7.x/identicon/svg?seed=${id}`;
};

const getStatusEmoji = (status) => {
  if (status.includes('–±–µ—Ç–∞-—Ç–µ—Å—Ç')) return 'üß™';
  if (status.includes('—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞')) return 'üõ†Ô∏è';
  if (status.includes('—Å–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã')) return 'üë•';
  return 'üìã';
};

const getRoleEmoji = (role) => {
  if (role.includes('–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç')) return 'üë®‚Äçüíª';
  if (role.includes('–ø—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥')) return 'üéØ';
  if (role.includes('–ª–∏–¥–µ—Ä')) return 'üëë';
  return 'üë§';
};

// Demo data for projects
const projects = [
  {
    id: 1,
    name: '–Ø–¥—Ä–æ',
    description: '–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram-–±–æ—Ç–æ–º',
    status: ['–±–µ—Ç–∞-—Ç–µ—Å—Ç'],
    team: [
      {
        name: '–†–æ–º–∞–Ω –≠–∫–∑–µ–º–ø–ª—è—Ä–æ–≤',
        telegram: '@exemplarov',
        role: ['–ª–∏–¥–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞', '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç'],
        avatar: getAvatarUrl(1),
      },
    ],
    openRoles: [],
  },
  {
    id: 2,
    name: '–ü—Ä–æ—Ñ–∏–ª—å –∏ –ø–æ–∏—Å–∫',
    description: '–ù–∞—à–∞ —É—é—Ç–Ω–∞—è —Å–æ—Ü.—Å–µ—Ç—å',
    status: ['–±–µ—Ç–∞-—Ç–µ—Å—Ç', '—Å–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã'],
    team: [
      {
        name: '–†–æ–º–∞–Ω –≠–∫–∑–µ–º–ø–ª—è—Ä–æ–≤',
        telegram: '@exemplarov',
        role: ['–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç'],
        avatar: getAvatarUrl(1),
      },
    ],
    openRoles: [{ title: '–ª–∏–¥–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞' }, { title: '–ø—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥' }, { title: '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç' }],
  },
  {
    id: 3,
    name: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å',
    description: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –≤–µ–±–∏–Ω–∞—Ä—ã',
    status: ['—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', '—Å–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã'],
    team: [
      {
        name: '–ê—Ä—Ç—ë–º –ì–æ—à–æ–≤—Å–∫–∏–π',
        telegram: '@goshovsky',
        role: ['–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç'],
        avatar: getAvatarUrl(1000),
      },
    ],
    openRoles: [{ title: '–ª–∏–¥–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞' }, { title: '–ø—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥' }],
  },
  {
    id: 4,
    name: '–î–æ—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π',
    description: '–ü–æ–∏—Å–∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤',
    status: ['—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', '—Å–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã'],
    team: [
      {
        name: '–ò–≤–∞–Ω –ü–æ–¥–∞',
        telegram: '@Ivan_Poda',
        role: ['–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç'],
        avatar: getAvatarUrl(66),
      },
    ],
    openRoles: [{ title: '–ª–∏–¥–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞' }, { title: '–ø—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥' }],
  },
  {
    id: 5,
    name: '–°—Ç–∞—Ä—Ç–∞–ø—ã',
    description: '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤ –∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤',
    status: ['—Å–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã'],
    team: [],
    openRoles: [{ title: '–ª–∏–¥–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞' }, { title: '–ø—Ä–æ–¥—É–∫—Ç–æ–ª–æ–≥' }, { title: '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç' }],
  },
];
</script>

<style lang="scss" scoped>
.scroll {
  overflow-x: auto;
  scrollbar-width: none;
  &::-webkit-scrollbar {
    display: none;
  }
}

.project-card {
  min-height: 200px;
  min-width: 300px;
  background-color: rgb(29, 29, 39);
  box-shadow: none;

  a {
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

.q-btn.q-btn--flat {
  opacity: 0.7;
  transition: opacity 0.2s;

  &:hover {
    opacity: 1;
  }
}
</style>
